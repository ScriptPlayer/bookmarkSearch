(function(){"use strict";var e={165:function(e,t,r){var l=r(6369),i=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"app"}},[t("el-row",{staticStyle:{position:"fixed",top:"10px",left:"0","z-index":"99",width:"100%"}},[t("el-col",{attrs:{span:6}},[t("el-select",{staticStyle:{"margin-left":"10px",width:"90%"},attrs:{placeholder:"指定域名",multiple:"","collapse-tags":"",filterable:"",clearable:"","allow-create":"","default-first-option":""},model:{value:e.domainSelect,callback:function(t){e.domainSelect=t},expression:"domainSelect"}},e._l(e.domainArr,(function(e){return t("el-option",{key:e,attrs:{value:e}})})),1)],1),t("el-col",{attrs:{span:6}},[t("el-input",{attrs:{id:"searchText",placeholder:"多个关键词以|分隔"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.startSearch.apply(null,arguments)}},model:{value:e.filterText,callback:function(t){e.filterText=t},expression:"filterText"}},[t("span",{attrs:{slot:"prepend",title:"查询书签名称至少包含一个关键词的;支持正则表达式"},slot:"prepend"},[e._v("模糊：")])])],1),t("el-col",{attrs:{span:6}},[t("el-input",{attrs:{placeholder:"请输入必需的一个关键词"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.startSearch.apply(null,arguments)}},model:{value:e.accurateSearch,callback:function(t){e.accurateSearch=t},expression:"accurateSearch"}},[t("span",{attrs:{slot:"prepend",id:"accurateText",title:"查询出的书签必需包含有该关键词"},slot:"prepend"},[e._v("精确：")]),t("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.startSearch},slot:"append"})],1)],1),t("el-col",{attrs:{span:6}},[t("el-button",{staticStyle:{"margin-right":"10px",float:"right"},on:{click:e.expandAll}},[e._v("全部展开")]),t("el-button",{staticStyle:{"margin-right":"10px",float:"right"},on:{click:e.seeFolder}},[e._v("切换为自由展开模式")])],1)],1),t("div",{staticStyle:{position:"fixed",top:"60px",left:"0",height:"90%",width:"100%","overflow-y":"auto"}},[t("el-tree",{ref:"tree",staticClass:"filter-tree",attrs:{data:e.data,props:e.defaultProps,"default-expand-all":"","filter-node-method":e.filterNode},on:{"node-click":e.handleNodeClick},scopedSlots:e._u([{key:"default",fn:function({node:r,data:l}){return[null!=l.children?t("div",{staticStyle:{width:"100%"}},[t("img",{attrs:{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAAdgAAAHYBTnsmCAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAACfSURBVDiNY2CgEDAyMDAwGMuz9HKwMvIxMDAw/Pz97/uZh39LGBgYfhFjAAsDAwODlRJz0KRwLgUGBgaGa8/+/o2Y+1WDj5PpIT6NP37//3T24Z9iRlMd/sw/X77Ve2qz/iHF6duv/mZh4eFqZAz1ED+wapKuPSmaYSAs7/JBJnI0IoNRA0YNYGBgYGDUU+crYGD8Z0aW7v9Mpyh1AAMAjOAqwqmixIsAAAAASUVORK5CYII=",alt:"Icon"}}),t("span",{staticStyle:{"margin-left":"5px","font-size":"13px","font-weight":"bold",display:"inline-block",width:"80%",overflow:"hidden","text-overflow":"ellipsis"}},[e._v(e._s(r.label))]),t("span",{staticStyle:{float:"right","margin-right":"10px"}},[e._v(e._s(e.getFormatDate(l.dateAdded)))])]):t("div",{staticStyle:{width:"100%"}},[t("img",{staticStyle:{"margin-left":"5px",width:"16px",height:"16px"},attrs:{src:e.faviconURL(l.url),alt:""}}),t("span",{staticStyle:{display:"inline-block","margin-left":"10px",width:"80%",overflow:"hidden","text-overflow":"ellipsis"}},[e._v(e._s(r.label))]),t("span",{staticStyle:{float:"right","margin-right":"10px"}},[e._v(e._s(e.getFormatDate(l.dateAdded)))])])]}}])})],1)],1)},n=[],a=(r(6229),r(7330),r(2062),{name:"App",data(){return{onlyFolder:!0,folderChildren:[],filterText:"",accurateSearch:"",data:null,defaultProps:{children:"children",label:"title"},domainSelect:[],domainArr:null,searchType:"模糊",readOnlyFolder:null,initFreedomTree:null,oldTreeData:null,debouncedFilterTextHandler:null,clickFolderId:null,allTreeData:void 0}},created(){},mounted(){let e=document.getElementById("accurateText");e.parentElement.style.borderRadius="0",document.getElementById("searchText").style.borderRadius="0",window.init=this.init},methods:{init(e){this.allTreeData=e;const t="只看目录";let r=JSON.parse(this.allTreeData);this.domainArr=this.getDomains(r),this.readOnlyFolder=this.filterTreeData(r,t),this.initFreedomTree=this.clearChildren(JSON.parse(e)),this.data=this.filterTreeData(r,t)},filterTextHandler(e,t){if(""==t&&!1===this.onlyFolder&&(this.oldTreeData=this.data),""==e&&0===this.domainArr.length&&""==this.accurateSearch)this.onlyFolder?this.data=JSON.parse(JSON.stringify(this.readOnlyFolder)):this.data=JSON.parse(JSON.stringify(this.oldTreeData));else{let t=JSON.parse(this.allTreeData);this.data=this.filterTreeData(t,e)}},getDomainFromUrl(e){const t=new URL(e).hostname;return t},getDomains(e,t=new Set){for(const r of e){if(r.url){const e=this.getDomainFromUrl(r.url);t.add(e)}r.children&&r.children.length>0&&this.getDomains(r.children,t)}return[...t]},expandAll(){this.data=JSON.parse(this.allTreeData)},faviconURL(e){const t=new URL(chrome.runtime.getURL("/_favicon/"));return t.searchParams.set("pageUrl",e),t.searchParams.set("size","16"),t.toString()},getFormatDate(e){let t=e.toString().length>10?new Date(e):new Date(1e3*e);return new Intl.DateTimeFormat("zh-CN",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"}).format(t)},startSearch(){let e=""==this.filterText&&0===this.domainSelect.length&&""==this.accurateSearch;if(!1!==this.onlyFolder||e||(this.oldTreeData=JSON.parse(JSON.stringify(this.data))),e)this.onlyFolder?this.data=JSON.parse(JSON.stringify(this.readOnlyFolder)):this.data=JSON.parse(JSON.stringify(this.oldTreeData));else{let e=JSON.parse(this.allTreeData);this.data=this.filterTreeData(e,this.filterText)}},seeFolder(e){this.onlyFolder?(this.onlyFolder=!1,e.target.textContent="切换回原模式",this.data=JSON.parse(JSON.stringify(this.initFreedomTree))):(this.onlyFolder=!0,this.data=JSON.parse(JSON.stringify(this.readOnlyFolder)),e.target.textContent="切换为自由展开模式")},findChildrenById(e,t){for(let r=0;r<e.length;r++){const l=e[r];if(l.id==t)return l.children;if(l.children&&l.children.length>0){const e=this.findChildrenById(l.children,t);if(e)return e}}return null},clearChildren(e){return e.map((e=>e.children&&e.children.length>0?{...e,children:[]}:e))},handleNodeClick(e){let t=JSON.parse(this.allTreeData),r=this.findChildrenById(t,e.id);if(null==r)return void window.open(e.url);let l=this.clearChildren(r);e.children=l,null!=e.children&&this.onlyFolder&&(this.folderChildren=e.children,this.$refs.tree.filter("目录及其子节点"))},filterNode(e,t){if(this.onlyFolder&&"只看目录"===e)return null!=t.children;if(this.onlyFolder&&"目录及其子节点"===e)return!(null==t.children&&!this.folderChildren.includes(t));{let e=new RegExp(this.filterText,"i").test(t.title),r=t.title.toLowerCase().includes(this.accurateSearch.toLowerCase()),l=!1;if(null!=t.url)if(0===this.domainSelect.length)l=!0;else{let e=this.getDomainFromUrl(t.url);l=this.domainSelect.some((t=>e.includes(t)))}return e&&r&&l}},filterTreeData(e,t){let r=this;function l(e){return e.children&&e.children.length>0&&(e.children=e.children.filter((e=>l.call(this,e)))),r.filterNode(t,e)||e.children&&e.children.length>0}return e.filter((e=>l.call(this,e)))}}}),o=a,d=r(1001),s=(0,d.Z)(o,i,n,!1,null,null,null),c=s.exports,h=r(8499),u=r.n(h);l["default"].use(u()),l["default"].config.productionTip=!1,new l["default"]({render:e=>e(c)}).$mount("#app")}},t={};function r(l){var i=t[l];if(void 0!==i)return i.exports;var n=t[l]={id:l,loaded:!1,exports:{}};return e[l].call(n.exports,n,n.exports,r),n.loaded=!0,n.exports}r.m=e,function(){r.amdO={}}(),function(){var e=[];r.O=function(t,l,i,n){if(!l){var a=1/0;for(c=0;c<e.length;c++){l=e[c][0],i=e[c][1],n=e[c][2];for(var o=!0,d=0;d<l.length;d++)(!1&n||a>=n)&&Object.keys(r.O).every((function(e){return r.O[e](l[d])}))?l.splice(d--,1):(o=!1,n<a&&(a=n));if(o){e.splice(c--,1);var s=i();void 0!==s&&(t=s)}}return t}n=n||0;for(var c=e.length;c>0&&e[c-1][2]>n;c--)e[c]=e[c-1];e[c]=[l,i,n]}}(),function(){r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,{a:t}),t}}(),function(){r.d=function(e,t){for(var l in t)r.o(t,l)&&!r.o(e,l)&&Object.defineProperty(e,l,{enumerable:!0,get:t[l]})}}(),function(){r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){r.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){var e={143:0};r.O.j=function(t){return 0===e[t]};var t=function(t,l){var i,n,a=l[0],o=l[1],d=l[2],s=0;if(a.some((function(t){return 0!==e[t]}))){for(i in o)r.o(o,i)&&(r.m[i]=o[i]);if(d)var c=d(r)}for(t&&t(l);s<a.length;s++)n=a[s],r.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return r.O(c)},l=self["webpackChunknvp1"]=self["webpackChunknvp1"]||[];l.forEach(t.bind(null,0)),l.push=t.bind(null,l.push.bind(l))}();var l=r.O(void 0,[998],(function(){return r(165)}));l=r.O(l)})();
//# sourceMappingURL=app.5887f674.js.map